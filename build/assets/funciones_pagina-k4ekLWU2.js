document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",function(e){if(e.target.closest(".btn-eliminar")){const t=e.target.closest(".btn-eliminar"),o=t.dataset.tipo,r=t.dataset.id;i(o,r)}});function i(e,t){Swal.fire({title:`¿Estás seguro de eliminar el ${e}?`,text:"No podrás revertir esta acción.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(o=>{o.isConfirmed&&fetch(`/eliminar/${e}/${t}`,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"}}).then(r=>r.json()).then(r=>{if(r.success){Swal.fire({toast:!0,position:"top-end",icon:"success",title:"Eliminado",text:`El ${e} fue eliminado`,showConfirmButton:!1,timer:3e3,timerProgressBar:!0});const n=document.getElementById(`${e}_${t}`);n&&n.remove()}else Swal.fire("Error",r.message||"No se pudo eliminar","error")}).catch(()=>Swal.fire("Error","Error en la solicitud","error"))})}document.querySelectorAll(".toggle-btn").forEach(e=>{e.addEventListener("click",function(t){var o;t.preventDefault(),(o=document.getElementById("sidebar"))==null||o.classList.toggle("expand")})}),$(document).ready(function(){$("#miTabla").DataTable({dom:"Bfrtip",buttons:[{extend:"copy",text:"Copiar"},{extend:"csv",text:"CSV"},{extend:"excel",text:"Excel"},{extend:"pdf",text:"PDF"},{extend:"print",text:"Imprimir"}],aLengthMenu:[[5,10,25,-1],[5,10,25,"Todos"]],iDisplayLength:5})})});window.mensajeSuccess&&Swal.fire({toast:!0,position:"top-end",icon:"success",title:"Éxito",text:window.mensajeSuccess,showConfirmButton:!1,timer:3e3,timerProgressBar:!0});window.mensajeError&&Swal.fire({toast:!0,position:"top-end",icon:"error",title:"Error",text:window.mensajeError,showConfirmButton:!1,timer:3e3,timerProgressBar:!0});window.errorUsuario&&Swal.fire({icon:"error",title:"Error",text:"Usuario o contraseña incorrectos",confirmButtonText:"Aceptar"});
