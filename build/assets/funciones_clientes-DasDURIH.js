document.addEventListener("DOMContentLoaded",function(){const p=document.querySelectorAll("#Select_estado, #editar_estado"),i=document.querySelectorAll("#Select_municipio, #editar_municipio");p.forEach(c=>{c.addEventListener("change",async()=>{const l=c.value;if(i.forEach(e=>{e.innerHTML='<option value="">Cargando...</option>'}),l!=="")try{const t=await(await fetch(`clientes/buscarMunicipio/${l}`)).json();i.forEach(a=>{a.innerHTML='<option value="">-- Selecciona --</option>',t.forEach(r=>{const o=document.createElement("option");o.value=r.id_municipio,o.textContent=r.municipio,a.appendChild(o)})})}catch(e){console.error("Error al cargar opciones:",e),i.forEach(t=>{t.innerHTML='<option value="">Error al cargar</option>'})}else i.forEach(e=>{e.innerHTML='<option value="">-- Selecciona --</option>'})})}),document.querySelectorAll(".btn-editarCliente").forEach(c=>{c.addEventListener("click",function(){const e=this.closest("tr").querySelectorAll("td"),t=e[0].textContent.trim(),a=e[2].textContent.trim(),r=e[3].textContent.trim(),o=e[4].textContent.trim(),E=e[5].textContent.trim(),v=e[6].textContent.trim(),_=e[7].textContent.trim(),g=e[8].textContent.trim(),f=e[9].textContent.trim(),m=e[10].dataset.id,h=e[11].dataset.id;document.getElementById("editar_id").value=t,document.getElementById("editar_nombre").value=a,document.getElementById("editar_nombre_comercial").value=r,document.getElementById("editar_telefono").value=E,document.getElementById("editar_correo").value=v,document.getElementById("editar_codigo_postal").value=_,document.getElementById("editar_rol").value=o,document.getElementById("editar_colonia").value=g,document.getElementById("editar_calle").value=f,document.getElementById("editar_estado").value=m,document.getElementById("formActualizarCliente").action=`/clientes/actualizar/${t}`,fetch(`clientes/buscarMunicipio/${m}`).then(n=>n.json()).then(n=>{const d=document.getElementById("editar_municipio");d.innerHTML='<option value="">-- Selecciona --</option>',n.forEach(s=>{const u=document.createElement("option");u.value=s.id_municipio,u.textContent=s.municipio,d.appendChild(u)}),d.value=h}).catch(n=>{console.error("Error al cargar municipios:",n)})})})});
